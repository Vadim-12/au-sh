(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{4830:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return s(6237)}])},6183:function(e,n,s){"use strict";s.d(n,{C:function(){return r},T:function(){return i}});var t=s(1248);let i=()=>(0,t.I0)(),r=t.v9},6237:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return h}});var t=s(5893),i=s(7294);let r=()=>(0,t.jsxs)("header",{children:["Шапка панели администратора",(0,t.jsx)("div",{className:"border_line"})]}),l=()=>(0,t.jsxs)("footer",{children:[(0,t.jsx)("div",{className:"border_line"}),"Подвал панели администратора"]}),a=e=>{let{children:n}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r,{}),(0,t.jsx)("main",{children:n}),(0,t.jsx)(l,{})]})};var u=s(6183),d=s(2374),o=s(241);let c=()=>{let[e,n]=(0,i.useState)(""),[s,r]=(0,i.useState)(""),[l,c]=(0,i.useState)(""),[h,f]=(0,i.useState)([]),x=(0,u.T)(),j=(0,u.C)(e=>e.admin),{data:g}=d.Z.useGetAllAdminsQuery(null);return(0,i.useEffect)(()=>{let e=(null==g?void 0:g.length)?g:[];f(e)},[g]),(0,i.useEffect)(()=>{let e=localStorage.getItem("admin");if(e){let n=JSON.parse(e);x((0,o.Xq)({isLoginned:n.isLoginned})),x((0,o.IJ)({login:n.login})),x((0,o.sp)({password:n.password}))}},[]),(0,t.jsx)(a,{children:(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)("h1",{children:"Панель администратора"}),h.length,(0,t.jsx)("br",{}),"Авторизован: ",String(j.isLoginned),(0,t.jsx)("br",{}),"Логин: ",j.login,(0,t.jsx)("br",{}),"Пароль: ",j.password,j.isLoginned?(0,t.jsx)("p",{children:"Вы успешно авторизовались!"}):(0,t.jsxs)("form",{action:"",className:"auth-form",onSubmit:function(t){t.preventDefault();let i=h.find(n=>n.login===e);if(!i){c("администратора с таким логином не найдено.");return}if(i.password!==s){c("неверный пароль.");return}let l={...i,isLoginned:!0};x((0,o.Xq)({isLoginned:!0})),x((0,o.IJ)({login:e})),x((0,o.sp)({password:s})),localStorage.setItem("admin",JSON.stringify(l)),n(""),r(""),c("")},children:[(0,t.jsx)("h2",{children:"Вход"}),(0,t.jsxs)("div",{className:"auth-input",children:[(0,t.jsxs)("div",{className:"login-block",children:[(0,t.jsx)("label",{children:"Логин:"}),(0,t.jsx)("input",{type:"text",value:e,onChange:function(e){n(e.target.value)}})]}),(0,t.jsxs)("div",{className:"password-block",children:[(0,t.jsx)("label",{children:"Пароль:"}),(0,t.jsx)("input",{type:"password",value:s,onChange:function(e){r(e.target.value)}})]})]}),(0,t.jsx)("button",{type:"submit",children:"Войти"})]}),l&&(0,t.jsxs)("div",{className:"auth-error",children:["Ошибка входа: ",l]})]})})};var h=c}},function(e){e.O(0,[774,888,179],function(){return e(e.s=4830)}),_N_E=e.O()}]);