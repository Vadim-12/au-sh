(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{4830:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return s(6237)}])},6183:function(e,n,s){"use strict";s.d(n,{C:function(){return r},T:function(){return i}});var t=s(1248);let i=()=>(0,t.I0)(),r=t.v9},6237:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return x}});var t=s(5893),i=s(7294);let r=()=>(0,t.jsxs)("header",{children:["Шапка панели администратора",(0,t.jsx)("div",{className:"border_line"})]}),l=()=>(0,t.jsxs)("footer",{children:[(0,t.jsx)("div",{className:"border_line"}),"Подвал панели администратора"]}),a=e=>{let{children:n}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r,{}),(0,t.jsx)("main",{children:n}),(0,t.jsx)(l,{})]})};var o=s(6183),u=s(2374),c=s(241),d=s(1163),h=s(7993);let f=()=>{let[e,n]=(0,i.useState)(""),[s,r]=(0,i.useState)(""),[l,f]=(0,i.useState)(""),[x,j]=(0,i.useState)([]),m=(0,d.useRouter)(),g=(0,o.T)(),p=(0,o.C)(e=>e.admin),{data:v}=u.Z.useGetAllAdminsQuery(null);return(0,i.useEffect)(()=>{let e=(null==v?void 0:v.length)?v:[];j(e)},[v]),(0,i.useEffect)(()=>{let e=localStorage.getItem("admin");if(e){let n=JSON.parse(e);g((0,c.Xq)({isLoginned:n.isLoginned})),g((0,c.IJ)({login:n.login})),g((0,c.sp)({password:n.password}))}},[]),(0,t.jsx)(a,{children:(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)("h1",{children:"Панель администратора"}),"API_URL: ",h.T,x.length,(0,t.jsx)("br",{}),"админы: ",x.map(e=>{let{login:n,password:s}=e;return(0,t.jsxs)("div",{children:[n," ",s]})}),p.isLoginned?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:"Вы успешно авторизовались!"}),(0,t.jsx)("button",{onClick:function(){localStorage.removeItem("admin"),g((0,c.Xq)({isLoginned:!1}))},children:"Выйти"}),(0,t.jsx)("button",{onClick:function(){m.push("/")},children:"Выйти"})]}):(0,t.jsxs)("form",{action:"",className:"auth-form",onSubmit:function(t){t.preventDefault();let i=x.find(n=>n.login===e);if(!i){f("администратора с таким логином не найдено.");return}if(i.password!==s){f("неверный пароль.");return}let l={...i,isLoginned:!0};g((0,c.Xq)({isLoginned:!0})),g((0,c.IJ)({login:e})),g((0,c.sp)({password:s})),localStorage.setItem("admin",JSON.stringify(l)),n(""),r(""),f("")},children:[(0,t.jsx)("h2",{children:"Вход"}),(0,t.jsxs)("div",{className:"auth-input",children:[(0,t.jsxs)("div",{className:"login-block",children:[(0,t.jsx)("label",{children:"Логин:"}),(0,t.jsx)("input",{type:"text",value:e,onChange:function(e){n(e.target.value)}})]}),(0,t.jsxs)("div",{className:"password-block",children:[(0,t.jsx)("label",{children:"Пароль:"}),(0,t.jsx)("input",{type:"password",value:s,onChange:function(e){r(e.target.value)}})]})]}),(0,t.jsx)("button",{type:"submit",children:"Войти"})]}),l&&(0,t.jsxs)("div",{className:"auth-error",children:["Ошибка входа: ",l]})]})})};var x=f},1163:function(e,n,s){e.exports=s(387)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=4830)}),_N_E=e.O()}]);