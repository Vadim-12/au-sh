(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{4830:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return s(6237)}])},6183:function(e,n,s){"use strict";s.d(n,{C:function(){return l},T:function(){return i}});var t=s(1248);let i=()=>(0,t.I0)(),l=t.v9},6237:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return h}});var t=s(5893),i=s(7294);let l=()=>(0,t.jsxs)("header",{children:["Шапка панели администратора",(0,t.jsx)("div",{className:"border_line"})]}),r=()=>(0,t.jsxs)("footer",{children:[(0,t.jsx)("div",{className:"border_line"}),"Подвал панели администратора"]}),a=e=>{let{children:n}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l,{}),(0,t.jsx)("main",{children:n}),(0,t.jsx)(r,{})]})};var c=s(6183),d=s(2374),u=s(241);let o=()=>{let[e,n]=(0,i.useState)(""),[s,l]=(0,i.useState)(""),[r,o]=(0,i.useState)(""),[h,f]=(0,i.useState)([]),x=(0,c.T)(),j=(0,c.C)(e=>e.admin),{data:m}=d.Z.useGetAllAdminsQuery(null);return(0,i.useEffect)(()=>{let e=(null==m?void 0:m.length)?m:[];f(e)},[m]),(0,i.useEffect)(()=>{let e=localStorage.getItem("admin");if(e){let n=JSON.parse(e);x((0,u.Xq)({isLoginned:n.isLoginned})),x((0,u.IJ)({login:n.login})),x((0,u.sp)({password:n.password}))}},[]),(0,t.jsx)(a,{children:(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)("h1",{children:"Панель администратора"}),j.isLoginned?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("form",{action:"",className:"car-add-form",onSubmit:function(e){e.preventDefault()},children:[(0,t.jsx)("h2",{children:"Добавить авто"}),(0,t.jsx)("div",{className:"",children:(0,t.jsxs)("div",{className:"block",children:[(0,t.jsx)("label",{children:"Марка авто:"}),(0,t.jsx)("input",{type:"text"})]})})]})}):(0,t.jsxs)("form",{action:"",className:"auth-form",onSubmit:function(t){t.preventDefault();let i=h.find(n=>n.login===e);if(!i){o("администратора с таким логином не найдено.");return}if(i.password!==s){o("неверный пароль.");return}let r={...i,isLoginned:!0};x((0,u.Xq)({isLoginned:!0})),x((0,u.IJ)({login:e})),x((0,u.sp)({password:s})),localStorage.setItem("admin",JSON.stringify(r)),n(""),l(""),o("")},children:[(0,t.jsx)("h2",{children:"Вход"}),(0,t.jsxs)("div",{className:"auth-input",children:[(0,t.jsxs)("div",{className:"login-block",children:[(0,t.jsx)("label",{children:"Логин:"}),(0,t.jsx)("input",{type:"text",value:e,onChange:function(e){n(e.target.value)}})]}),(0,t.jsxs)("div",{className:"password-block",children:[(0,t.jsx)("label",{children:"Пароль:"}),(0,t.jsx)("input",{type:"password",value:s,onChange:function(e){l(e.target.value)}})]})]}),(0,t.jsx)("button",{type:"submit",children:"Войти"})]}),r&&(0,t.jsxs)("div",{className:"auth-error",children:["Ошибка входа: ",r]})]})})};var h=o}},function(e){e.O(0,[774,888,179],function(){return e(e.s=4830)}),_N_E=e.O()}]);